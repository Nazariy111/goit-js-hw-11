{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet simpleLightBox;\n\nconst refs = {\n    formEl: document.querySelector('.search-form'),\n    galleryEl: document.querySelector('.gallery-box'),\n    btnEl: document.querySelector('.search-btn'),\n};\n\nconst loader = document.querySelector('.loader-box');\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\nrefs.formEl.addEventListener('input', e => {\n    const searchWord = refs.formEl.elements.word.value.trim();\n    if (searchWord) {\n        refs.btnEl.disabled = false;\n        refs.btnEl.classList.remove('disabled');\n    };\n});\n\n\nfunction onFormSubmit(e) {\n    e.preventDefault();\n    refs.formEl.insertAdjacentHTML(\"afterend\", '<div class=\"loader-box \"><span class=\"loader\"></span></div>');\n\n    const loader = document.querySelector('.loader-box');\n\n    const galleryParentElem = document.querySelector('.gallery');\n    if (galleryParentElem) { galleryParentElem.remove(); };\n    \n    const galleryParentElemMarkup = '<div class=\"gallery\"></div>';\n    refs.galleryEl.insertAdjacentHTML(\"afterbegin\", galleryParentElemMarkup);\n\n    const searchWord = e.target.elements.word.value.trim();\n\n    if (searchWord) { \n        searchImage(searchWord)\n            .then(data => {\n                let imagesArray = data.hits;\n\n                if (imagesArray.length > 0) {\n                    loader.remove();\n                    renderImages(imagesArray);\n                    \n                    simpleLightBox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 }).refresh();\n                } else {\n                    loader.remove();\n\n                    iziToast.show({\n                        timeout: 5000,\n                        position: 'topCenter',\n                        color: '#d11804',\n                        messageColor: 'white',\n                        titleColor: '#FFFFFF',\n                        iconColor: '#FFFFFF',\n                        message: \"Sorry, there are no images matching your search query. Please try again!\",\n                    });\n                };\n            });\n    } else { \n        loader.remove();\n        \n        iziToast.show({\n            timeout: 5000,\n            position: 'topCenter',\n            color: '#d11804',\n            messageColor: 'white',\n            titleColor: '#FFFFFF',\n            iconColor: '#FFFFFF',\n            message: \"The field is empty. Please enter a word!\",\n                    });\n    };\n\n    refs.formEl.reset();\n    refs.btnEl.disabled = true;\n    refs.btnEl.classList.add('disabled');\n\n};\n\n\nfunction searchImage(searchWord) {\n    const URL = 'https://pixabay.com';\n    const END_POINT = '/api/';\n    const PARAMS = `?key=42153044-59e7d8487fc2c2f8c6f74878d&q=${searchWord}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n    const url = URL + END_POINT + PARAMS; \n\n    return fetch(url)\n        .then(res => {\n            if (!res.ok) {\n                throw new Error(res.status);\n            };\n            return res.json();\n        })\n        .catch(error => console.log(error)); \n};\n\n\nfunction renderImages(imagesArray) {\n    const markup = imagesArray\n        .map(image => {\n            const { id, largeImageURL, webformatURL, tags, likes, views, comments, downloads } = image;\n            return `<a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <div class=\"gallery-item\" id=\"${id}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" data-source=\"${largeImageURL}\"/>\n            <div class=\"info\">\n              <p class=\"info-item\"><b>Likes</b>${likes}</p>\n              <p class=\"info-item\"><b>Views</b>${views}</p>\n              <p class=\"info-item\"><b>Comments</b>${comments}</p>\n              <p class=\"info-item\"><b>Downloads</b>${downloads}</p>\n            </div>\n          </div>\n        </a>`;})\n        .join('');\n    const gallery = refs.galleryEl.querySelector('.gallery');\n    \n    gallery.insertAdjacentHTML('beforeend', markup);\n    \n};\n\n"],"names":["refs","onFormSubmit","e","loader","galleryParentElem","galleryParentElemMarkup","searchWord","searchImage","data","imagesArray","renderImages","SimpleLightbox","iziToast","URL","END_POINT","PARAMS","url","res","error","markup","image","id","largeImageURL","webformatURL","tags","likes","views","comments","downloads"],"mappings":"wvBAOA,MAAMA,EAAO,CACT,OAAQ,SAAS,cAAc,cAAc,EAC7C,UAAW,SAAS,cAAc,cAAc,EAChD,MAAO,SAAS,cAAc,aAAa,CAC/C,EAEe,SAAS,cAAc,aAAa,EAEnDA,EAAK,OAAO,iBAAiB,SAAUC,CAAY,EACnDD,EAAK,OAAO,iBAAiB,QAASE,GAAK,CACpBF,EAAK,OAAO,SAAS,KAAK,MAAM,SAE/CA,EAAK,MAAM,SAAW,GACtBA,EAAK,MAAM,UAAU,OAAO,UAAU,EAE9C,CAAC,EAGD,SAASC,EAAaC,EAAG,CACrBA,EAAE,eAAc,EAChBF,EAAK,OAAO,mBAAmB,WAAY,6DAA6D,EAExG,MAAMG,EAAS,SAAS,cAAc,aAAa,EAE7CC,EAAoB,SAAS,cAAc,UAAU,EACvDA,GAAqBA,EAAkB,OAAQ,EAEnD,MAAMC,EAA0B,8BAChCL,EAAK,UAAU,mBAAmB,aAAcK,CAAuB,EAEvE,MAAMC,EAAaJ,EAAE,OAAO,SAAS,KAAK,MAAM,OAE5CI,EACAC,EAAYD,CAAU,EACjB,KAAKE,GAAQ,CACV,IAAIC,EAAcD,EAAK,KAEnBC,EAAY,OAAS,GACrBN,EAAO,OAAM,EACbO,EAAaD,CAAW,EAEP,IAAIE,EAAe,aAAc,CAAE,aAAc,MAAO,aAAc,GAAG,CAAE,EAAE,YAE9FR,EAAO,OAAM,EAEbS,EAAS,KAAK,CACV,QAAS,IACT,SAAU,YACV,MAAO,UACP,aAAc,QACd,WAAY,UACZ,UAAW,UACX,QAAS,0EACjC,CAAqB,EAErB,CAAa,GAELT,EAAO,OAAM,EAEbS,EAAS,KAAK,CACV,QAAS,IACT,SAAU,YACV,MAAO,UACP,aAAc,QACd,WAAY,UACZ,UAAW,UACX,QAAS,0CACrB,CAAqB,GAGjBZ,EAAK,OAAO,QACZA,EAAK,MAAM,SAAW,GACtBA,EAAK,MAAM,UAAU,IAAI,UAAU,CAEvC,CAGA,SAASO,EAAYD,EAAY,CAC7B,MAAMO,EAAM,sBACNC,EAAY,QACZC,EAAS,6CAA6CT,4DAEtDU,EAAMH,EAAMC,EAAYC,EAE9B,OAAO,MAAMC,CAAG,EACX,KAAKC,GAAO,CACT,GAAI,CAACA,EAAI,GACL,MAAM,IAAI,MAAMA,EAAI,MAAM,EAE9B,OAAOA,EAAI,MACvB,CAAS,EACA,MAAMC,GAAS,QAAQ,IAAIA,CAAK,CAAC,CAC1C,CAGA,SAASR,EAAaD,EAAa,CAC/B,MAAMU,EAASV,EACV,IAAIW,GAAS,CACV,KAAM,CAAE,GAAAC,EAAI,cAAAC,EAAe,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,EAAGR,EACrF,MAAO,iCAAiCE;AAAA,0CACVD;AAAA,8CACIE,WAAsBC,kCAAqCF;AAAA;AAAA,iDAExDG;AAAA,iDACAC;AAAA,oDACGC;AAAA,qDACCC;AAAA;AAAA;AAAA,aAGvC,CAAC,EACN,KAAK,EAAE,EACI5B,EAAK,UAAU,cAAc,UAAU,EAE/C,mBAAmB,YAAamB,CAAM,CAElD"}