{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet simpleLightBox;\n\nconst refs = {\n    formEl: document.querySelector('.search-form'),\n    galleryEl: document.querySelector('.gallery-box'),\n    btnEl: document.querySelector('.search-btn'),\n};\n\nrefs.formEl.addEventListener('submit', onFormSubmit);\nrefs.formEl.addEventListener('input', e => {\n    const searchWord = refs.formEl.elements.word.value.trim();\n    if (searchWord) {\n        refs.btnEl.disabled = false;\n    };\n});\n\n\nfunction onFormSubmit(e) {\n    e.preventDefault();\n    const galleryParentElem = document.querySelector('.gallery');\n    if (galleryParentElem) { galleryParentElem.remove(); };\n    \n    const galleryParentElemMarkup = '<div class=\"gallery\"></div>';\n    refs.galleryEl.insertAdjacentHTML(\"afterbegin\", galleryParentElemMarkup);\n    // simpleLightBox = new SimpleLightbox('.gallery a').refresh();\n    const searchWord = e.target.elements.word.value.trim();\n    console.log(`word-${searchWord}-word`); \n    if (searchWord) { \n        \n        searchImage(searchWord)\n            .then(data => {\n                let imagesArray = data.hits;\n                if (imagesArray.length > 0) {\n                    renderImages(imagesArray);\n                    \n                    simpleLightBox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 }).refresh();\n                } else {\n                    console.log(\"Sorry, there are no images matching your search query. Please try again!\");\n                };\n            });\n    } else { \n        \n        alert('tap something');\n        console.log('error');\n    };\n\n    refs.formEl.reset();\n    refs.btnEl.disabled = true;\n\n};\n\n\nfunction searchImage(searchWord) {\n    const URL = 'https://pixabay.com';\n    const END_POINT = '/api/';\n    const PARAMS = `?key=42153044-59e7d8487fc2c2f8c6f74878d&q=${searchWord}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n    const url = URL + END_POINT + PARAMS; \n\n    return fetch(url).then(res => res.json());\n};\n\n\nfunction renderImages(imagesArray) {\n    const markup = imagesArray\n        .map(image => {\n            const { id, largeImageURL, webformatURL, tags, likes, views, comments, downloads } = image;\n            return `<a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <div class=\"gallery-item\" id=\"${id}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" data-source=\"${largeImageURL}\"/>\n            <div class=\"info\">\n              <p class=\"info-item\"><b>Likes</b>${likes}</p>\n              <p class=\"info-item\"><b>Views</b>${views}</p>\n              <p class=\"info-item\"><b>Comments</b>${comments}</p>\n              <p class=\"info-item\"><b>Downloads</b>${downloads}</p>\n            </div>\n          </div>\n        </a>`;})\n        .join('');\n    const gallery = refs.galleryEl.querySelector('.gallery');\n    gallery.insertAdjacentHTML('beforeend', markup);\n    \n};\n\n"],"names":["refs","onFormSubmit","e","galleryParentElem","galleryParentElemMarkup","searchWord","searchImage","data","imagesArray","renderImages","SimpleLightbox","URL","END_POINT","PARAMS","url","res","markup","image","id","largeImageURL","webformatURL","tags","likes","views","comments","downloads"],"mappings":"svBAOA,MAAMA,EAAO,CACT,OAAQ,SAAS,cAAc,cAAc,EAC7C,UAAW,SAAS,cAAc,cAAc,EAChD,MAAO,SAAS,cAAc,aAAa,CAC/C,EAEAA,EAAK,OAAO,iBAAiB,SAAUC,CAAY,EACnDD,EAAK,OAAO,iBAAiB,QAASE,GAAK,CACpBF,EAAK,OAAO,SAAS,KAAK,MAAM,SAE/CA,EAAK,MAAM,SAAW,GAE9B,CAAC,EAGD,SAASC,EAAaC,EAAG,CACrBA,EAAE,eAAc,EAChB,MAAMC,EAAoB,SAAS,cAAc,UAAU,EACvDA,GAAqBA,EAAkB,OAAQ,EAEnD,MAAMC,EAA0B,8BAChCJ,EAAK,UAAU,mBAAmB,aAAcI,CAAuB,EAEvE,MAAMC,EAAaH,EAAE,OAAO,SAAS,KAAK,MAAM,OAChD,QAAQ,IAAI,QAAQG,QAAiB,EACjCA,EAEAC,EAAYD,CAAU,EACjB,KAAKE,GAAQ,CACV,IAAIC,EAAcD,EAAK,KACnBC,EAAY,OAAS,GACrBC,EAAaD,CAAW,EAEP,IAAIE,EAAe,aAAc,CAAE,aAAc,MAAO,aAAc,GAAG,CAAE,EAAE,WAE9F,QAAQ,IAAI,0EAA0E,CAE1G,CAAa,GAGL,MAAM,eAAe,EACrB,QAAQ,IAAI,OAAO,GAGvBV,EAAK,OAAO,QACZA,EAAK,MAAM,SAAW,EAE1B,CAGA,SAASM,EAAYD,EAAY,CAC7B,MAAMM,EAAM,sBACNC,EAAY,QACZC,EAAS,6CAA6CR,4DAEtDS,EAAMH,EAAMC,EAAYC,EAE9B,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAOA,EAAI,KAAI,CAAE,CAC5C,CAGA,SAASN,EAAaD,EAAa,CAC/B,MAAMQ,EAASR,EACV,IAAIS,GAAS,CACV,KAAM,CAAE,GAAAC,EAAI,cAAAC,EAAe,aAAAC,EAAc,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,EAAGR,EACrF,MAAO,iCAAiCE;AAAA,0CACVD;AAAA,8CACIE,WAAsBC,kCAAqCF;AAAA;AAAA,iDAExDG;AAAA,iDACAC;AAAA,oDACGC;AAAA,qDACCC;AAAA;AAAA;AAAA,aAGvC,CAAC,EACN,KAAK,EAAE,EACIzB,EAAK,UAAU,cAAc,UAAU,EAC/C,mBAAmB,YAAagB,CAAM,CAElD"}